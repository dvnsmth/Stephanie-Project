# Artifact contracts for The Stephanie Project (v1)
# Purpose: prevent output drift by requiring stable, parseable headings per artifact.
# These are intentionally minimal: they check for required sections rather than full parsing.

version: v1

artifacts:
  trend_brief:
    description: Trend Scout topic brief
    required_headings:
      - "## Trend Brief"
      - "## Topics"

  ideas:
    description: Theo idea list
    required_headings:
      - "## Ideas"

  approved_ideas:
    description: Mabel shortlist + rejections
    required_headings:
      - "## Approved Shortlist"
      - "## Selection Notes"
      - "## Rejected"

  scene_brief:
    description: Rowan scene brief (coordination artifact)
    required_headings:
      - "## Title"
      - "## Source Idea"
      - "## Characters Present"
      - "## Selection Notes"
      - "## Dialogue Budget"

  scripts:
    description: Lena micro-scripts
    required_headings:
      - "### Source Brief"
    required_any:
      - "### Script A (spoken)"
      - "### Dialogue"

  scene_plan:
    description: Rowan scene plan
    required_headings:
      - "### Source References"
      - "### Beat Sheet"

  render_report:
    description: Evan render report
    required_headings:
      - "## Render Output"
      - "## Source Inputs"
      - "## Prompt Bundle Summary"
      - "## QC Self-Check"

  qc_report:
    description: QC pass/fail report
    required_headings:
      - "## QC Result"
      - "## Findings"
    required_markers:
      - "**Status:**"

  curator_decision:
    description: Human curator decision (filled by user)
    required_headings:
      - "## Curator Decision"
    required_markers:
      - "Approved:"
      - "Selected version:"

  run_manifest:
    description: Run provenance manifest (inputs/outputs/hashes)
    required_yaml_keys:
      - "schema_version"
      - "run.id"
      - "run.created_at"
      - "run.state"
      - "run.state_history"
      - "inputs.config.path"
      - "inputs.config.sha256"
      - "inputs.contracts.path"
      - "inputs.contracts.sha256"
      - "inputs.prompts"
      - "inputs.policy"
      - "inputs.policy.stephanie_taste_profile.path"
      - "inputs.policy.stephanie_taste_profile.sha256"
      - "inputs.policy.trend_usage_rules.path"
      - "inputs.policy.trend_usage_rules.sha256"
      - "inputs.policy.character_bible.path"
      - "inputs.policy.character_bible.sha256"
      - "inputs.policy.scope_boundaries.path"
      - "inputs.policy.scope_boundaries.sha256"
      - "inputs.provider.name"
      - "inputs.provider.model"
      - "inputs.routing"
      - "outputs"
